<formats>
  <!-- As of Dec2005, there are no TAB chars in this file -->
  <!-- Please do not re-add them (use SPACE chars) so we can keep some -->
  <!-- semblance of readability.  Thanks - very appreciated!  tracey -->


  <!-- class is the name of the corresponding PHP class -->

  <format name="JPEG">
    <!-- NOTE: this is effectively a demo of using another docker image to derive a module -->
    <!-- NOTE: limited to just collection poohBot and AVI sources :) -->
    <extension>jpg</extension>
    <class>ServerlessDocker</class>
    <variations>
      <variation name="JPEG from Video" parameter="registry.archive.org/www/serverless/master" conditionally="{'collection':['poohBot']}">
        <dependency format="Motion JPEG" variation="Motion JPEG"/>
        <dependency format="Cinepack" variation="Cinepack"/>
      </variation>
    </variations>
  </format>

  <format name="hOCR">
    <extension>gz</extension>
    <class>ServerlessDocker</class>
    <variations>
      <variation name="hOCR GZ" preextension="_hocr.html" parameter="{'production':'registry.archive.org/www/tesseract/production','test':'registry.archive.org/www/tesseract/testing'}" conditionally="{'collection':['sim_microfilm','internetarchivebooks','tesseract_test']}">
        <dependency format="PJP2ZIP" variation="Single Page Processed JP2 ZIP"/>
        <dependency format="PJP2TAR" variation="Single Page Processed JP2 Tar"/>
      </variation>
    </variations>
  </format>

  <format name="Log">
    <extension>log</extension>
    <class>ServerlessDocker</class>
    <variations>
      <variation name="Microfilm Issues Log" preextension="_ufilm" parameter="{'production':'registry.archive.org/www/microfilm-issue-generator/production','test':'registry.archive.org/www/microfilm-issue-generator/testing','arg':'--device /dev/fuse --cap-add SYS_ADMIN --privileged'}">
        <dependency format="JSON" variation="Microfilm Issues JSON"/>
      </variation>
    </variations>
  </format>

  <format name="MPX">
    <extension>mpx</extension>
    <class>ServerlessDocker</class>
    <variations>
      <variation rank="0" name="MPX" parameter="registry.archive.org/www/av/master" conditionally="{'collection':['tvarchive']}">
        <dependency format="h.264" variation="h.264"/>
      </variation>
    </variations>
  </format>

  <format name="Audio Speech Analysis">
    <extension>json</extension>
    <class>ServerlessDocker</class>
    <variations>
      <variation rank="300" name="Speech Confidence JSON" preextension="_speech_confidence" parameter="registry.archive.org/www/audio-tagger/master" conditionally="{'collection':['radio','radio-archive']}">
        <dependency format="MP3"          variation="VBR MP3"/>
        <dependency format="MPEG-4 Audio" variation="MPEG-4 Audio"/>
      </variation>

      <variation rank="301" name="Speech VS Music JSON" preextension="_speech_vs_music" parameter="registry.archive.org/www/audio-tagger/master" conditionally="{'collection':['radio','radio-archive']}">
        <dependency format="Speech Confidence JSON" variation="Speech Confidence JSON"/>
      </variation>

      <variation rank="302" name="JSON SRT" preextension="_speech_vs_music_asr" deextension=".asr" parameter="registry.archive.org/www/audio-tagger/master" conditionally="{'format':['Speech VS Music JSON']}">
        <dependency format="SubRip" variation="SubRip"/>
      </variation>
    </variations>
  </format>


  <format name="WAVE">
    <extension>wav</extension>
    <variations>
      <variation name="WAVE" />
    </variations>
  </format>

  <format name="MP3">
    <extension>mp3</extension>
    <extension>mpeg3</extension>
    <class>MP3</class>
    <category>lossy</category>
    <variations>
      <!-- NOTE: deriv *NOT* usually made.  see Deriver.loadCollectionRules() -->
      <variation rank="123" name="MP3" parameter="-b96 -a" conditionally="{'collection':['TV-DW','TV-ALJAZ','TV-RT','internetarchivepresents','tv_ads','prelinger','decentralizedwebsummit2016','us_congress','dopetapes','densho','educationalfilms','electionmedia','community_media','digitallibraryindia','hdvideo','internetarchivepresents','feature_films']}">
        <dependency format="h.264/MPEG2-TS" variation="h.264/MPEG2-TS" />
        <dependency format="MPEG2" variation="MPEG2" />
        <dependency format="MPEG1" variation="MPEG1" />
        <dependency format="QuickTime" variation="QuickTime" />
        <dependency format="MPEG4" variation="MPEG4" />
        <dependency format="Windows Media" variation="Windows Media" />
        <dependency format="Matroska" variation="Matroska" /> <!--for rare utube sources-->
        <dependency format="WebM"     variation="WebM" />     <!--for rare utube sources-->
        <dependency format="h.264 HD" variation="h.264 HD" /> <!--for rare utube sources w/ SD/HD toggle -->
        <dependency format="ISO Image" variation="ISO Image" />
      </variation>
      <!-- NOTE: deriv *NOT* usually made.  see Deriver.loadCollectionRules() -->
      <variation rank="123" name="64Kbps MP3" parameter="-b64 -a --resample 22.05" preextension="_64kb" conditionally="{'collection':['podcast_corydoctorow','librivoxaudio']}">
        <dependency format="WAVE"       variation="WAVE" />
        <dependency format="Shorten"    variation="Shorten"/>
        <dependency format="Flac"       variation="24bit Flac" />
        <dependency format="Flac"       variation="Flac" />
        <dependency format="Advanced Audio Coding" variation="Advanced Audio Coding"/>
        <dependency format="WebA"       variation="WebA" />
        <dependency format="AIFF"       variation="AIFF" />
        <dependency format="Windows Media Audio"  variation="Windows Media Audio" />
        <dependency format="Digital Theater Systems Audio" variation="Digital Theater Systems Audio"/>
        <dependency format="MP3"        variation="320Kbps MP3"/>
        <dependency format="MP3"        variation="256Kbps MP3"/>
        <dependency format="MP3"        variation="192Kbps MP3"/>
        <dependency format="MP3"        variation="160Kbps MP3"/>
        <dependency format="MP3"        variation="128Kbps MP3"/>
        <dependency format="Ogg Vorbis" variation="Ogg Vorbis" />
        <dependency format="MP3"        variation="96Kbps MP3"/>
        <dependency format="Real Audio" variation="Real Audio"/>
        <dependency format="Apple Lossless Audio" variation="Apple Lossless Audio"/>
        <dependency format="3GP Audio"  variation="3GP Audio" />
        <dependency format="MIDI"       variation="MIDI" />
        <dependency format="MPEG Audio" variation="MPEG Audio"/>
        <dependency format="MP3"        variation="VBR MP3"/>
      </variation>
      <!-- NOTE: we want this _before_ "MP3 Sample" to ensure we try to make this before samples for items with Segment Data, etc. -->
      <variation rank="121" name="VBR MP3" parameter="--preset standard" conditionally="{'!collection':['radio','radio-archive']}">
        <dependency format="Segment Data" variation="Segment Data" />
        <dependency format="WAVE"       variation="WAVE" />
        <dependency format="Shorten"    variation="Shorten"/>
        <dependency format="Flac"       variation="24bit Flac" conditionally="{'!format':['Segment Data']}"/>
        <dependency format="Flac"       variation="Flac"       conditionally="{'!format':['Segment Data']}"/>
        <dependency format="Advanced Audio Coding" variation="Advanced Audio Coding"/>
        <dependency format="WebA"       variation="WebA" />
        <dependency format="AIFF"       variation="AIFF" />
        <dependency format="Windows Media Audio"  variation="Windows Media Audio" />
        <dependency format="Digital Theater Systems Audio" variation="Digital Theater Systems Audio"/>
        <dependency format="MP3"        variation="320Kbps MP3"/>
        <dependency format="MP3"        variation="256Kbps MP3"/>
        <dependency format="MP3"        variation="192Kbps MP3"/>
        <dependency format="MP3"        variation="160Kbps MP3"/>
        <dependency format="MP3"        variation="128Kbps MP3"/>
        <dependency format="Ogg Vorbis" variation="Ogg Vorbis"/>
        <dependency format="Real Audio" variation="Real Audio"/>
        <dependency format="Apple Lossless Audio" variation="Apple Lossless Audio"/>
        <dependency format="3GP Audio"  variation="3GP Audio" />
        <dependency format="MIDI"       variation="MIDI" />
        <dependency format="MPEG Audio" variation="MPEG Audio"/>
      </variation>
      <variation rank="122" name="MP3 Sample" parameter="--preset medium" preextension="_sample" conditionally="{'collection':['samples_only']}">
        <dependency format="Segment Data" variation="Segment Data" />
        <dependency format="WAVE"       variation="WAVE" />
        <dependency format="Shorten"    variation="Shorten"/>
        <dependency format="Flac"       variation="24bit Flac" conditionally="{'!format':['Segment Data']}"/>
        <dependency format="Flac"       variation="Flac"       conditionally="{'!format':['Segment Data']}"/>
        <dependency format="Advanced Audio Coding" variation="Advanced Audio Coding"/>
        <dependency format="WebA"       variation="WebA" />
        <dependency format="AIFF"       variation="AIFF" />
        <dependency format="Windows Media Audio"  variation="Windows Media Audio" />
        <dependency format="Digital Theater Systems Audio" variation="Digital Theater Systems Audio"/>
        <dependency format="MP3"        variation="320Kbps MP3"/>
        <dependency format="MP3"        variation="256Kbps MP3"/>
        <dependency format="MP3"        variation="192Kbps MP3"/>
        <dependency format="MP3"        variation="VBR MP3"/>
        <dependency format="MP3"        variation="160Kbps MP3"/>
        <dependency format="MP3"        variation="128Kbps MP3"/>
        <dependency format="Ogg Vorbis" variation="Ogg Vorbis" />
        <dependency format="MP3"        variation="96Kbps MP3"/>
        <dependency format="Real Audio" variation="Real Audio"/>
        <dependency format="Apple Lossless Audio" variation="Apple Lossless Audio"/>
        <dependency format="3GP Audio"  variation="3GP Audio" />
        <dependency format="MPEG Audio" variation="MPEG Audio"/>
      </variation>
      <variation name="320Kbps MP3" preextension="_320kb" />
      <variation name="256Kbps MP3" preextension="_256kb" />
      <variation name="192Kbps MP3" preextension="_192kb" />
      <variation name="160Kbps MP3" preextension="_160kb" />
      <variation name="128Kbps MP3" preextension="_128kb"/>
      <variation name="96Kbps MP3"  preextension="_96kb" />
    </variations>
  </format>

  <format name="AIFF">
    <extension>aiff</extension>
    <extension>aif</extension>
    <variations>
      <variation name="AIFF"/>
    </variations>
  </format>

  <format name="Windows Media Audio">
    <extension>wma</extension>
    <variations>
      <variation name="Windows Media Audio"/>
    </variations>
  </format>


  <format name="MPEG-4 Audio">
    <extension>m4a</extension>
    <class>M4A</class>
    <category>lossy</category>
    <variations>
      <variation rank="125" name="MPEG-4 Audio" conditionally="{'collection':['radio','radio-archive','beta-audio']}">
        <dependency format="Advanced Audio Coding" variation="Advanced Audio Coding" />
        <dependency format="MP3" variation="VBR MP3" />
      </variation>
    </variations>
  </format>


  <format name="Advanced Audio Coding">
    <extension>aac</extension>
    <variations>
      <variation name="Advanced Audio Coding"/>
    </variations>
  </format>

  <format name="Apple Audiobook">
    <extension>m4b</extension>
    <variations>
      <variation name="Apple Audiobook"/>
      <variation name="LibriVox Apple Audiobook" preextension="_librivox"/>
    </variations>
  </format>

  <format name="Sibelius">
    <extension>sib</extension>
    <variations>
      <variation name="Sibelius"/>
    </variations>
  </format>

  <format name="Digital Theater Systems Audio">
    <extension>dts</extension>
    <variations>
      <variation name="Digital Theater Systems Audio"/>
    </variations>
  </format>

  <format name="Ogg Vorbis">
    <!-- NOTE: we _used_ to make .ogg files, similar to .mp3 files.  Discontinued 2020-01 -->
    <extension>ogg</extension>
    <category>lossy</category>
    <variations>
      <variation name="Ogg Vorbis"/>
    </variations>
  </format>

  <format name="Shorten">
    <extension>shn</extension>
    <variations>
      <variation name="Shorten"/>
    </variations>
  </format>

  <format name="Flac">
    <extension>flac</extension>
    <class>FLAC</class>
    <variations>
      <variation rank="210" name="Flac">
        <dependency rank="180" format="WAVE" variation="WAVE" />
        <dependency format="Digital Theater Systems Audio" variation="Digital Theater Systems Audio"/>
        <!-- dependency format="Shorten" variation="Shorten" / -->
      </variation>
      <variation name="24bit Flac" />
    </variations>
  </format>

  <format name="M3U">
    <extension>m3u</extension>
    <variations>
      <variation name="M3U"/>
      <variation name="64kbps M3U" preextension="_64kb"/>
      <variation name="128kbps M3U" preextension="_128kb"/>
      <variation name="VBR M3U" preextension="_vbr"/>
    </variations>
  </format>

  <format name="CD Data">
    <extension>zip</extension>
    <variations>
      <variation name="CD Datafiles Zip" preextension="_cddata"/>
    </variations>
  </format>

  <format name="Columbia Peaks">
    <extension>afpk</extension>
    <class>AudioFingerprint</class>
    <variations>
      <variation name="Columbia Peaks" parameter="precompute --precompute-peaks --density 70" conditionally="{'!collection':['tvarchive','librivoxaudio','political_ads','electionmedia']}">
        <dependency format="Windows Media"  variation="Windows Media" />
        <dependency format="WAVE"       variation="WAVE" />
        <dependency format="Shorten"    variation="Shorten"/>
        <dependency format="Flac"       variation="24bit Flac" conditionally="{'!format':['Segment Data']}"/>
        <dependency format="Flac"       variation="Flac"       conditionally="{'!format':['Segment Data']}"/>
        <dependency format="Advanced Audio Coding" variation="Advanced Audio Coding"/>
        <dependency format="WebA"       variation="WebA" />
        <dependency format="AIFF"       variation="AIFF" />
        <dependency format="Windows Media Audio"  variation="Windows Media Audio" />
        <dependency format="Digital Theater Systems Audio" variation="Digital Theater Systems Audio"/>
        <dependency format="MP3"        variation="320Kbps MP3"/>
        <dependency format="MP3"        variation="256Kbps MP3"/>
        <dependency format="MP3"        variation="192Kbps MP3"/>
        <dependency format="MP3"        variation="VBR MP3"/>
        <dependency format="MP3"        variation="160Kbps MP3"/>
        <dependency format="MP3"        variation="128Kbps MP3"/>
        <dependency format="Ogg Vorbis" variation="Ogg Vorbis"/>
        <dependency format="Real Audio" variation="Real Audio"/>
        <dependency format="Apple Lossless Audio" variation="Apple Lossless Audio"/>
        <dependency format="3GP Audio"  variation="3GP Audio" />
        <dependency format="MPEG Audio" variation="MPEG Audio"/>
      </variation>
    </variations>
  </format>

  <format name="Columbia Fingerprint">
    <extension>afpt</extension>
    <class>AudioFingerprint</class>
    <variations>

      <!-- TV ARCHIVE ONLY-->
      <variation rank="130" name="Columbia Fingerprint TV" preextension="_tva" parameter="precompute --samplerate 11025 --density 100 --shifts 1" conditionally="{'collection':['political_ads','electionmedia']}">
        <dependency format="MP3"        variation="VBR MP3"/>
        <dependency format="MP3"        variation="MP3"/>
        <dependency format="MP3"        variation="64Kbps MP3"/>
        <dependency format="Matroska" variation="Matroska" /> <!--for rare utube sources-->
      </variation>
      <variation rank="130" name="Columbia Sparse Fingerprint TV" preextension="_tva20" parameter="precompute --samplerate 11025 --density 20 --shifts 1" conditionally="{'collection':['political_ads','electionmedia']}">
        <dependency format="MP3"        variation="VBR MP3"/>
        <dependency format="MP3"        variation="MP3"/>
        <dependency format="MP3"        variation="64Kbps MP3"/>
      </variation>

      <!-- ALL OTHER AUDIO ITEMS -->

      <variation name="Columbia Fingerprint">
<!-- DEPRECATED FOR NOW, GENERATING Columbia Peaks INSTEAD -->
<!--
        <dependency format="WAVE"       variation="WAVE" />
        <dependency format="Shorten"    variation="Shorten"/>
        <dependency format="Flac"       variation="24bit Flac" />
        <dependency format="Flac"       variation="Flac" />
        <dependency format="Advanced Audio Coding" variation="Advanced Audio Coding"/>
        <dependency format="WebA"       variation="WebA" />
        <dependency format="AIFF"       variation="AIFF" />
        <dependency format="Windows Media Audio"  variation="Windows Media Audio" />
        <dependency format="Digital Theater Systems Audio" variation="Digital Theater Systems Audio"/>
        <dependency format="MP3"        variation="320Kbps MP3"/>
        <dependency format="MP3"        variation="256Kbps MP3"/>
        <dependency format="MP3"        variation="192Kbps MP3"/>
        <dependency format="MP3"        variation="VBR MP3"/>
        <dependency format="MP3"        variation="160Kbps MP3"/>
        <dependency format="MP3"        variation="128Kbps MP3"/>
        <dependency format="Ogg Vorbis" variation="Ogg Vorbis"/>
        <dependency format="Real Audio" variation="Real Audio"/>
        <dependency format="Apple Lossless Audio" variation="Apple Lossless Audio"/>
        <dependency format="3GP Audio"  variation="3GP Audio" />
        <dependency format="MPEG Audio" variation="MPEG Audio"/>
-->
<!-- END COMMENTED SECTION -->
      </variation>
    </variations>
  </format>

  <format name="Essentia Low GZ">
    <extension>gz</extension>
    <variations>
      <variation rank="240" name="Essentia Low GZ" preextension="_esslow.json" conditionally="{'!collection':['tvarchive','librivoxaudio']}">
        <!-- suspend derivation of this format (BK request, May 2016)
        <dependency format="WAVE"       variation="WAVE" />
        <dependency format="Shorten"    variation="Shorten"/>
        <dependency format="Flac"       variation="24bit Flac" />
        <dependency format="Flac"       variation="Flac" />
        <dependency format="Advanced Audio Coding" variation="Advanced Audio Coding"/>
        <dependency format="WebA"       variation="WebA" />
        <dependency format="AIFF"       variation="AIFF" />
        <dependency format="Windows Media Audio"  variation="Windows Media Audio" />
        <dependency format="Digital Theater Systems Audio" variation="Digital Theater Systems Audio"/>
        <dependency format="MP3"        variation="320Kbps MP3"/>
        <dependency format="MP3"        variation="256Kbps MP3"/>
        <dependency format="MP3"        variation="192Kbps MP3"/>
        <dependency format="MP3"        variation="VBR MP3"/>
        <dependency format="MP3"        variation="160Kbps MP3"/>
        <dependency format="MP3"        variation="128Kbps MP3"/>
        <dependency format="Ogg Vorbis" variation="Ogg Vorbis"/>
        <dependency format="Real Audio" variation="Real Audio"/>
        <dependency format="Apple Lossless Audio" variation="Apple Lossless Audio"/>
        <dependency format="3GP Audio"  variation="3GP Audio" />
        <dependency format="MPEG Audio" variation="MPEG Audio"/>
        -->
      </variation>
    </variations>
  </format>

  <format name="Essentia High GZ">
    <extension>gz</extension>
    <variations>
      <variation name="Essentia High GZ" preextension="_esshigh.json" conditionally="{'!collection':['tvarchive','librivoxaudio']}">
        <!-- suspend derivation of this format (BK request, May 2016)
        <dependency format="Essentia Low GZ"  variation="Essentia Low GZ" />
        -->
      </variation>
    </variations>
  </format>

  <format name="Spectrogram">
    <extension>png</extension>
    <class>Spectrogram</class>
    <variations>
      <variation rank="230" name="Spectrogram" preextension="_spectrogram" conditionally="{'!collection':['tvarchive']}">
        <dependency format="WAVE"       variation="WAVE" />
        <dependency format="Shorten"    variation="Shorten"/>
        <dependency format="Flac"       variation="24bit Flac" conditionally="{'!format':['Segment Data']}"/>
        <dependency format="Flac"       variation="Flac"       conditionally="{'!format':['Segment Data']}"/>
        <dependency format="Advanced Audio Coding" variation="Advanced Audio Coding"/>
        <dependency format="WebA"       variation="WebA" />
        <dependency format="AIFF"       variation="AIFF" />
        <dependency format="Windows Media Audio"  variation="Windows Media Audio" />
        <dependency format="Digital Theater Systems Audio" variation="Digital Theater Systems Audio"/>
        <dependency format="MP3"        variation="320Kbps MP3"/>
        <dependency format="MP3"        variation="256Kbps MP3"/>
        <dependency format="MP3"        variation="192Kbps MP3"/>
        <dependency format="MP3"        variation="VBR MP3"/>
        <dependency format="MP3"        variation="160Kbps MP3"/>
        <dependency format="MP3"        variation="128Kbps MP3"/>
        <dependency format="Ogg Vorbis" variation="Ogg Vorbis"/>
        <!-- <dependency format="Real Audio" variation="Real Audio"/> -->
        <!-- <dependency format="Apple Lossless Audio" variation="Apple Lossless Audio"/> -->
        <dependency format="3GP Audio"  variation="3GP Audio" />
        <dependency format="MP3"        variation="48Kbps MP3"/>
        <dependency format="MP3"        variation="32Kbps MP3"/>
        <dependency format="MPEG Audio" variation="MPEG Audio"/>
      </variation>
    </variations>
  </format>

  <format name="PURETAR">
    <extension>tar</extension>
    <variations>
      <variation name="Single Page Pure JP2 Tar" preextension="_pure_jp2"/>
    </variations>
  </format>

  <format name="PUREZIP">
    <extension>zip</extension>
    <variations>
      <variation name="Single Page Pure JP2 ZIP" preextension="_pure_jp2"/>
    </variations>
  </format>

  <format name="LIBJP2TAR">
    <extension>tar</extension>
    <variations>
      <variation name="Single Page Library JP2 Tar" preextension="_lib_jp2"/>
    </variations>
  </format>

  <format name="LIBJP2ZIP">
    <extension>zip</extension>
    <variations>
      <variation name="Single Page Library JP2 ZIP" preextension="_lib_jp2"/>
    </variations>
  </format>

  <format name="LIBTIFFZIP">
    <extension>zip</extension>
    <variations>
      <variation name="Single Page Library TIFF ZIP" preextension="_lib_tif"/>
    </variations>
  </format>

  <format name="WMJP2TAR">
    <class>WatermarkImages</class>
    <extension>tar</extension>
    <variations>
      <variation name="Single Page Watermark JP2 Tar" preextension="_wm_jp2">
        <!-- <dependency format="PJP2TAR"  variation="Single Page Processed JP2 Tar"/> disabled 5/23/08 -->
      </variation>
     </variations>
  </format>

  <format name="WMJP2ZIP">
    <class>WatermarkImages</class>
    <extension>zip</extension>
    <variations>
      <variation name="Single Page Watermark JP2 ZIP" preextension="_wm_jp2">
        <!-- <dependency format="PJP2ZIP"  variation="Single Page Processed JP2 ZIP"/> disabled 5/23/08 -->
        <!-- <dependency format="PTIFFZIP" variation="Single Page Processed TIFF ZIP"/> Not yet on mfilm books -->
      </variation>
    </variations>
  </format>

  <format name="GrayscalePDF">
    <extension>pdf</extension>
    <class>GrayscalePdf</class>
    <variations>
      <variation name="Grayscale LuraTech PDF" preextension="_bw" conditionally="{'collection':['aceportal','biodiversity','minorityhealth','mitpress','oclsaccessibility','yvesbouyermusicscores']}">
        <dependency format="AbbyyGZ" variation="Abbyy GZ"/>
        <dependency format="abbyyXML" variation="ABBYY XML"/>
      </variation>
    </variations>
  </format>

  <!-- obsolete legacy format; include def so that the several hundred we still have lying around -->
  <!-- don't get misrecognized as a separate Processed JPEG ZIP, with "_bitonal" as part of the name -->
  <!-- (can't easily just delete them because they unfortunately have source="original") -->
  <format name="BWJPGZIP">
    <extension>zip</extension>
    <variations>
      <variation name="Single Page B/W JPG ZIP" preextension="_bitonal_jpg"/>
    </variations>
  </format>

  <format name="CR2TAR">
    <class/>
    <extension>tar</extension>
    <variations>
      <variation name="Single Page Original CR2 Tar" preextension="_orig_cr2"/>
    </variations>
  </format>

  <format name="FJPGZIP">
    <class/>
    <extension>zip</extension>
    <variations>
      <variation name="Single Page FIXME JPEG ZIP" preextension="_fixme_jpg"/>
    </variations>
  </format>

  <format name="FJPGTAR">
    <class/>
    <extension>tar</extension>
    <variations>
      <variation name="Single Page FIXME JPEG Tar" preextension="_fixme_jpg"/>
    </variations>
  </format>

  <format name="RJPGZIP">
    <class/>
    <extension>zip</extension>
    <variations>
      <variation name="Single Page Raw JPEG ZIP" preextension="_raw_jpg"/>
    </variations>
  </format>

  <format name="RJPGTAR">
    <class/>
    <extension>tar</extension>
    <variations>
      <variation name="Single Page Raw JPEG Tar" preextension="_raw_jpg"/>
    </variations>
  </format>

  <format name="OTIFFZIP">
    <class/>
    <extension>zip</extension>
    <variations>
      <variation name="Microfilm Original TIFF ZIP" preextension="_orig_tif">
      </variation>
    </variations>
  </format>

  <format name="PTIFFZIP">
    <class>ProcessTIFF</class>
    <extension>zip</extension>
    <variations>
      <variation name="Single Page Processed TIFF ZIP" preextension="_tif">
        <dependency format="OTIFFZIP" variation="Microfilm Original TIFF ZIP"/>
        <dependency format="ZIP" variation="Raw China Book Zip"/>
        <dependency format="ZIP" variation="Raw Michigan Book Zip"/>
      </variation>
    </variations>
  </format>

  <format name="RJP2ZIP">
    <class>ProcessJP2</class>
    <extension>zip</extension>
    <variations>
      <variation name="Single Page Raw JP2 ZIP" preextension="_raw_jp2">
        <!-- This is done as a pre-derive book op, so source=original.
        <dependency format="CR2TAR" variation="Single Page Original CR2 Tar"/>
        -->
      </variation>
    </variations>
  </format>

  <format name="RJP2TAR">
    <class>ProcessJP2</class>
    <extension>tar</extension>
    <variations>
      <variation name="Single Page Raw JP2 Tar" preextension="_raw_jp2">
        <!-- This is done as a pre-derive book op, so source=original.
        <dependency format="CR2TAR" variation="Single Page Original CR2 Tar"/>
        -->
      </variation>
    </variations>
  </format>

  <format name="OJP2ZIP">
    <class>ProcessJP2</class>
    <extension>zip</extension>
    <variations>
      <variation name="Single Page Original JP2 ZIP" preextension="_orig_jp2">
      </variation>
    </variations>
  </format>

  <format name="OJP2TAR">
    <class>ProcessJP2</class>
    <extension>tar</extension>
    <variations>
      <variation name="Single Page Original JP2 Tar" preextension="_orig_jp2">
      </variation>
    </variations>
  </format>

  <format name="PJP2ZIP">
    <class>ProcessJP2</class>
    <extension>zip</extension>
    <variations>
      <variation name="Single Page Processed JP2 ZIP" preextension="_jp2">
        <dependency format="OJP2TAR" variation="Single Page Original JP2 Tar"/>
        <dependency format="OJP2ZIP" variation="Single Page Original JP2 ZIP"/>
        <dependency format="RJP2TAR" variation="Single Page Raw JP2 Tar"/>
        <dependency format="RJP2ZIP" variation="Single Page Raw JP2 ZIP"/>
        <dependency format="RJPGTAR" variation="Single Page Raw JPEG Tar"/>
        <dependency format="RJPGZIP" variation="Single Page Raw JPEG ZIP"/>
        <dependency format="FJPGZIP" variation="Single Page FIXME JPEG ZIP"/>
        <dependency format="ZIP" variation="Raw Cornell Book Zip"/>
        <dependency format="ZIP" variation="Raw Yale Book Zip"/>
        <dependency format="ZIP" variation="Raw Yale Medical Book Zip"/>
        <dependency format="ZIP" variation="Raw NIH Book Zip"/>
        <dependency format="ZIP" variation="Raw BDRC Book Zip"/>
        <dependency format="ZIP" variation="Generic Raw Book Zip"/>
        <dependency format="Tar" variation="Generic Raw Book Tar"/>
        <dependency format="Comic Book ZIP" variation="Comic Book ZIP"/>
        <dependency format="Comic Book RAR" variation="Comic Book RAR"/>
        <dependency format="TransContents" variation="Texts Transclusion Contents"/>
        <!-- for the next two, must exit early if the source PDF was derived -->
        <dependency format="ImagePDF" variation="Image Container PDF"/>
        <dependency format="PDF" variation="Text PDF"/>
        <!-- and for this one, similarly must exit early if the source DjVu was derived -->
        <dependency format="DjVu" variation="DjVu"/>
      </variation>
    </variations>
  </format>


  <format name="PJP2TAR">
    <class>ProcessJP2</class>
    <extension>tar</extension>
    <variations>
      <variation name="Single Page Processed JP2 Tar" preextension="_jp2" />
    </variations>
  </format>



  <format name="PJPGZIP">
    <class>ProcessJP2</class>
    <extension>zip</extension>
    <variations>
      <variation name="Single Page Processed JPEG ZIP" preextension="_jpg">
        <!-- nope...let's save space!
        <dependency format="PJP2ZIP" variation="Single Page Processed JP2 ZIP"/>
        -->
      </variation>
    </variations>
  </format>

  <format name="ZIP">
    <extension>zip</extension>
    <class>ZIP</class>
    <variations>
      <variation name="Single Page Original JPEG ZIP" multifile="true" />
      <variation name="Single Page Original TIFF ZIP" multifile="true" />
      <!-- <variation name="Single Page Processed TIFF ZIP" preextension="_tif" multifile="true" /> -->
      <!-- Removed, we need these as a targets for a CR2 or JP2 source. -->
      <!--
      <variation name="Single Page Original JP2 ZIP" preextension="_jp2" multifile="true"/>
      <variation name="Single Page Processed JPEG ZIP" preextension="_jpg" multifile="true" />
       -->
      <variation name="Scribe Scandata ZIP" preextension="scandata" multifile="true" />
      <variation name="TTScribe Preimage ZIP" preextension="_preimage" multifile="true" />


      <variation name="Abbyy ZIP" preextension="_abbyy"/>

      <variation name="Raw China Book Zip" preextension="_cnbook"/>
      <variation name="Raw China Books RAR Zip" preextension="_cnrar"/>
      <variation name="Raw Cornell Book Zip" preextension="_cubook"/>
      <variation name="Raw Yale Book Zip" preextension="_yalebook"/>
      <variation name="Raw Yale Medical Book Zip" preextension="_yalemedbook"/>
      <variation name="Raw Michigan Book Zip" preextension="_umichbook"/>
      <variation name="Raw NIH Book Zip" preextension="_nihbook"/>
      <variation name="Raw BDRC Book Zip" preextension="_bdrc"/>
      <variation name="Generic Raw Book Zip" preextension="_images"/>

      <variation name="OCLC xISBN ZIP" preextension="_xisbn"/>

      <variation name="ZIP" multifile="true"/> <!--generic default in /editxml-->
    </variations>
  </format>


  <format name="Checksums">
    <!-- prior derivative - no longer used -->
    <extension>md5</extension>
    <variations>
      <variation name="Checksums" />
    </variations>
  </format>


  <format name="Flac FingerPrint">
    <!-- prior derivative - no longer used -->
    <extension>ffp</extension>
    <variations>
      <variation name="Flac FingerPrint" multifile="true" />
    </variations>
  </format>



  <format name="MPEG2">
    <extension>mpeg</extension>
    <extension>mp2</extension>
    <extension>mpeg2</extension>
    <extension>m2v</extension>
    <class>MPEG2</class>
    <variations>

      <!-- NOTE: this needs to run **first** since it can replace source files!-->
      <!-- NOTE: subtle - name needs to differ from MPEG2 since have another conditionally later.. -->
      <variation rank="100" name="VOB" conditionally="{'collection':['television']}">
        <dependency format="DVD Info" variation="DVD Info"/>
      </variation>

      <!-- NOTE: this needs to run **first** since it can replace source files!-->
      <!-- pegssc == PEG Server-Standards-Compliant -->
      <variation rank="0" name="MPEG2" preextension=".pegssc" conditionally="{'collection':['tedtalks','poptech','eastoncat','broadcast_ready','denveropenmedia','SeattleCommunityMedia','phillycam'],'parameter':'-ac 2 -acodec mp2 -ar 48000 -b:a 256k   -vcodec mpeg2video -r 29.97 -f dvd -copyts -g 15 -b:v 7000000 -maxrate 8000000 -minrate 5000000 -bufsize 835008 -packetsize 2048 -muxrate 10080000'}">
        <!-- back in black bars (and keep 4:3) -->
        <dependency format="h.264 HD" variation="h.264 HD" />
        <dependency format="DV Video" variation="DV Video" />
        <dependency format="h.264/MPEG2-TS" variation="h.264/MPEG2-TS" />
        <dependency format="MPEG2-TS" variation="MPEG2-TS" />
        <dependency format="MPEG2" variation="MPEG2"/>
        <dependency format="WebM" variation="WebM" />
        <dependency format="MPEG4" variation="h.264 MPEG4" />
        <dependency format="MPEG1" variation="MPEG1"/>
        <dependency format="Motion JPEG" variation="Motion JPEG" />
        <dependency format="QuickTime" variation="256Kb QuickTime" />
        <dependency format="MPEG4" variation="MPEG4" />
        <dependency format="QuickTime" variation="64Kb QuickTime" />
        <dependency format="QuickTime" variation="56Kb QuickTime" />
        <dependency format="QuickTime" variation="QuickTime" />
        <dependency format="Windows Media" variation="Windows Media" />
        <dependency format="DivX" variation="DivX" />
        <dependency format="Intel Video" variation="IV50" />
        <dependency format="Cinepack" variation="Cinepack" />
        <dependency format="Ogg Theora" variation="Ogg Theora" />
        <dependency format="Real Media" variation="Real Media" />
        <dependency format="ISO Image" variation="ISO Image" />
        <dependency format="Flash Video" variation="Flash Video" />
        <dependency format="MPEG4" variation="256Kb MPEG4" />
        <dependency format="MPEG4" variation="64Kb MPEG4" />
        <dependency format="3GP" variation="3GP" />
        <dependency format="Matroska" variation="Matroska" />
      </variation>
    </variations>
  </format>

  <format name="MPEG2-TS">
    <extension>ts</extension>
    <extension>m2ts</extension>
    <class />
    <variations>
      <variation name="MPEG2-TS" />
    </variations>
  </format>

  <format name="MPEG1">
    <class>MPEG1</class>
    <extension>mpg</extension>
    <extension>mp1</extension>
    <extension>mpeg1</extension>
    <class />
    <variations>
      <variation rank="0" name="MPEG1" multifile="true" conditionally="{'collection':['tvarchive']}">
        <dependency format="MPEGTS" variation="MPEGTS"/>
      </variation>
    </variations>
  </format>

  <format name="DV Video">
    <extension>dv</extension>
    <class />
    <variations>
      <variation name="DV Video" />
    </variations>
  </format>

  <format name="Ogg Video">
    <!-- NOTE: we _used_ to make .ogv files, similar to .mp4 files.  Discontinued 2020-01 -->
    <extension>ogv</extension>
    <category>lossy</category>
    <variations>
      <variation name="Ogg Video" />
    </variations>
  </format>

  <format name="Flash Video">
    <extension>flv</extension>
    <class />
    <variations>
      <variation name="Flash Video"/>
    </variations>
  </format>


  <format name="h.264 HD">
    <extension>mp4</extension>
    <extension>mpeg4</extension>
    <extension>m4v</extension>
    <extension>mov</extension>
    <variations>
      <variation name="h.264 HD" preextension=".HD"/>
    </variations>
  </format>


  <format name="h.264 4K">
    <extension>mp4</extension>
    <extension>mpeg4</extension>
    <extension>m4v</extension>
    <extension>mov</extension>
    <variations>
      <variation name="h.264 4K" preextension=".4K"/>
    </variations>
  </format>


  <format name="NRT">
    <extension>txt</extension>
    <variations>
      <variation rank="100" name="NRT" preextension="NRT"/>
    </variations>
  </format>
  <format name="NRT Processed">
    <extension>txt</extension>
    <class>NRT</class>
    <variations>
      <variation rank="100" name="NRT Processed" preextension="NRT_processed">
        <dependency format="NRT" variation="NRT" />
      </variation>
    </variations>
  </format>


  <format name="MPEG4">
    <extension>mp4</extension>
    <extension>mpeg4</extension>
    <extension>m4v</extension>
    <category>lossy</category>
    <class>MPEG4</class>
    <variations>
      <variation rank="180" name="h.264" conditionally="{'!collection':['tvsatellite']}">
        <dependency format="h.264 HD" variation="h.264 HD" />
        <dependency format="DV Video" variation="DV Video" />
        <dependency format="h.264/MPEG2-TS" variation="h.264/MPEG2-TS" />
        <dependency format="MPEG2-TS" variation="MPEG2-TS" />
        <dependency format="MPEG2" variation="MPEG2" />
        <dependency format="WebM" variation="WebM" />
        <dependency format="MPEG4" variation="h.264 MPEG4" />
        <dependency format="MPEG1" variation="MPEG1" />
        <dependency format="Motion JPEG" variation="Motion JPEG" />
        <dependency format="QuickTime" variation="256Kb QuickTime" />
        <dependency format="MPEG4" variation="MPEG4" />
        <dependency format="QuickTime" variation="QuickTime 1.5Mbps" />
        <dependency format="QuickTime" variation="QuickTime 1Mbps" />
        <dependency format="QuickTime" variation="64Kb QuickTime" />
        <dependency format="QuickTime" variation="56Kb QuickTime" />
        <dependency format="QuickTime" variation="QuickTime" />
        <dependency format="Windows Media" variation="Windows Media" />
        <dependency format="DivX" variation="DivX" />
        <dependency format="Intel Video" variation="IV50" />
        <dependency format="Cinepack" variation="Cinepack" />
        <dependency format="Ogg Theora" variation="Ogg Theora" />
        <dependency format="Real Media" variation="Real Media" />
        <dependency format="ISO Image" variation="ISO Image" />
        <dependency format="Flash Video" variation="Flash Video" />
        <dependency format="Flash Video" variation="LinkTV FLV (512k)" />
        <dependency format="Flash Video" variation="FLV 400k" />
        <dependency format="MPEG4" variation="MPEG4 1.5Mbps" />
        <dependency format="3GP" variation="3GP" />
        <dependency format="Matroska" variation="Matroska" />
        <!-- derive from _our_ prior derivative only as last resort -->
        <dependency format="Ogg Video" variation="Ogg Video" />
      </variation>


      <variation rank="180" name="h.264 IA" preextension=".ia">
        <dependency format="MPEG4" variation="MPEG4"/>
      </variation>


      <variation rank="180" name="h.264 720P" preextension="_720p" conditionally="{'collection':['35mmstockfootage','hdvideo','internetarchivepresents']}">
        <dependency format="DV Video" variation="DV Video" />
        <dependency format="h.264/MPEG2-TS" variation="h.264/MPEG2-TS" />
        <dependency format="MPEG2-TS" variation="MPEG2-TS" />
        <dependency format="MPEG2" variation="MPEG2" />
        <dependency format="WebM" variation="WebM" />
        <dependency format="MPEG4" variation="h.264 MPEG4" />
        <dependency format="Motion JPEG" variation="Motion JPEG" />
        <dependency format="MPEG4" variation="MPEG4" />
        <dependency format="QuickTime" variation="QuickTime" />
        <dependency format="Windows Media" variation="Windows Media" />
        <dependency format="DivX" variation="DivX" />
        <dependency format="Intel Video" variation="IV50" />
        <dependency format="Cinepack" variation="Cinepack" />
        <dependency format="Ogg Theora" variation="Ogg Theora" />
        <dependency format="Real Media" variation="Real Media" />
        <dependency format="Flash Video" variation="Flash Video" />
        <dependency format="Matroska" variation="Matroska" />
      </variation>


      <variation rank="180" name="h.264 popcorn" conditionally="{'collection':['popcornproject']}">
        <dependency format="Metadata" variation="Metadata" />
      </variation>


      <!-- our prior h.264 derivative (smaller bitrate, way less pixels) -->
      <variation name="512Kb MPEG4" preextension="_512kb" />
      <!-- these two are prior default mpeg4 derived formats -->
      <variation name="256Kb MPEG4" preextension="_256kb" />
      <variation name="64Kb MPEG4"  preextension="_64kb" />
      <!-- this is for prelinger items that usually have 'movie_edit.mp4' -->
      <!-- and we want to NOT derive anim GIFs and thumbs from it, too! -->
      <variation name="HiRes MPEG4" preextension="_edit" />
      <variation name="h.264 MPEG4"/>
      <variation name="MPEG4" />
    </variations>
  </format>

  <format name="QuickTime">
    <extension>mov</extension>
    <extension>qt</extension>
    <class />
    <variations>
      <variation name="56Kb QuickTime" preextension="_56kb" />
      <variation name="64Kb QuickTime" preextension="_64kb" />
      <variation name="256Kb QuickTime" preextension="_256kb" />
      <variation name="QuickTime" />
    </variations>
  </format>

  <format name="Motion JPEG">
    <extension>jmpeg</extension>
    <extension>jmpg</extension>
    <extension>mjpg</extension>
    <extension>avi</extension>
    <class/>
    <variations>
      <variation name="Motion JPEG" />
    </variations>
  </format>

  <format name="DivX">
    <extension>divx</extension>
    <extension>avi</extension>
    <class />
    <variations>
      <variation name="DivX" />
    </variations>
  </format>

  <format name="Intel Video">
    <extension>avi</extension>
    <class />
    <variations>
      <variation name="IV50" />
    </variations>
  </format>

  <format name="Windows Media">
    <extension>wmv</extension>
    <class />
    <variations>
      <variation name="Windows Media" />
    </variations>
  </format>

  <format name="ISO Image">
    <extension>iso</extension>
    <extension>cdr</extension>
    <extension>img</extension>
    <class />
    <variations>
      <variation name="ISO Image" />
    </variations>
  </format>

  <format name="Movie Frames">
    <extension>zip</extension>
    <variations>
      <variation name="Movie Frames" preextension="_frames" />
    </variations>
  </format>


  <format name="Ogg Theora">
    <extension>ogm</extension>
    <class />
    <variations>
      <variation name="Ogg Theora"/>
    </variations>
  </format>

  <format name="3GP">
    <extension>3gp</extension>
    <extension>3gpp</extension>
    <extension>3gpp2</extension>
    <class />
    <variations>
      <variation name="3GP"/>
    </variations>
  </format>

  <format name="3GP Audio">
    <extension>amr</extension>
    <extension>samr</extension>
    <class />
    <variations>
      <variation name="3GP Audio"/>
    </variations>
  </format>

  <format name="MIDI">
    <extension>mid</extension>
    <class />
    <variations>
      <variation name="MIDI"/>
    </variations>
  </format>

  <format name="WebM">
    <extension>webm</extension>
    <class />
    <variations>
      <variation name="WebM">
      </variation>
    </variations>
  </format>

  <format name="WebA">
    <extension>weba</extension>
    <class />
    <variations>
      <variation name="WebA"/>
    </variations>
  </format>

  <format name="Matroska">
    <extension>mkv</extension>
    <class />
    <variations>
      <variation name="Matroska"/>
    </variations>
  </format>

  <format name="Cinepack">
    <extension>avi</extension>
    <class>ServerlessDocker</class>
    <variations>
      <variation rank="100" name="Cinepack" parameter="registry.archive.org/www/av/master">
        <dependency format="Movie Frames" variation="Movie Frames"/>
      </variation>
    </variations>
  </format>

  <format name="Shockwave Flash">
    <extension>swf</extension>
    <class />
    <variations>
      <variation name="Shockwave Flash" />
    </variations>
  </format>

  <format name="Real Media">
    <extension>rm</extension>
    <extension>rmvb</extension>
    <class />
    <variations>
      <variation name="Real Media" />
    </variations>
  </format>

  <format name="Real Audio">
    <extension>ra</extension>
    <class />
    <variations>
      <variation name="Real Audio" />
    </variations>
  </format>

  <format name="Item Image">
    <extension>gif</extension>
    <extension>jpg</extension>
    <extension>png</extension>
    <class />
    <variations>
      <variation name="Item Image" preextension="_itemimage"/>
    </variations>
  </format>

  <format name="Item Tile">
    <extension>jpg</extension>
    <class />
    <variations>
      <variation name="Item Tile" preextension="__ia_thumb"/>
    </variations>
  </format>

  <format name="Emulator Screenshot">
    <extension>jpg</extension>
    <extension>png</extension>
    <extension>bmp</extension>
    <extension>gif</extension>
    <variations>
      <variation name="Emulator Screenshot" preextension="_screenshot"/>
    </variations>
  </format>

  <!-- front, back, and spine cover for a 'print on demand' book -->
  <format name="Book Cover">
    <extension>jpg</extension>
    <class />
    <variations>
      <variation name="Book Cover" preextension="_cover"/>
    </variations>
  </format>

  <!-- image contained within the front cover of a 'print on demand' book -->
  <format name="Book Cover Image">
    <extension>jpg</extension>
    <class />
    <variations>
      <variation name="Book Cover Image" preextension="_cover_image"/>
    </variations>
  </format>

  <format name="Animated GIF">
    <extension>gif</extension>
    <variations>
      <variation name="Animated GIF"/>
    </variations>
  </format>

  <format name="Thumbnail">
    <extension>jpg</extension>
    <class>Thumbnails</class>
    <subdir>.thumbs</subdir>
    <variations>
      <variation rank="140" name="Thumbnail" preextension="_000001">
        <dependency format="h.264 HD" variation="h.264 HD" />
        <dependency format="DV Video" variation="DV Video" />
        <dependency format="h.264/MPEG2-TS" variation="h.264/MPEG2-TS" />
        <dependency format="MPEG2-TS" variation="MPEG2-TS" />
        <dependency format="MPEG2" variation="MPEG2"/>
        <dependency format="WebM" variation="WebM" />
        <dependency format="MPEG4" variation="h.264 MPEG4" />
        <dependency format="MPEG1" variation="MPEG1"/>
        <dependency format="Motion JPEG" variation="Motion JPEG" />
        <dependency format="QuickTime" variation="256Kb QuickTime" />
        <dependency format="MPEG4" variation="MPEG4" />
        <dependency format="QuickTime" variation="QuickTime 1.5Mbps" />
        <dependency format="QuickTime" variation="QuickTime 1Mbps" />
        <dependency format="QuickTime" variation="64Kb QuickTime" />
        <dependency format="QuickTime" variation="56Kb QuickTime" />
        <dependency format="QuickTime" variation="QuickTime" />
        <dependency format="Windows Media" variation="Windows Media" />
        <dependency format="DivX" variation="DivX" />
        <dependency format="Intel Video" variation="IV50" />
        <dependency format="Cinepack" variation="Cinepack" />
        <dependency format="Ogg Theora" variation="Ogg Theora" />
        <dependency format="Real Media" variation="Real Media" />
        <dependency format="ISO Image" variation="ISO Image" />
        <dependency format="Flash Video" variation="Flash Video" />
        <dependency format="Flash Video" variation="LinkTV FLV (512k)" />
        <dependency format="Flash Video" variation="FLV 400k" />
        <dependency format="MPEG4" variation="MPEG4 1.5Mbps" />
        <dependency format="MPEG4" variation="256Kb MPEG4" />
        <dependency format="MPEG4" variation="64Kb MPEG4" />
        <dependency format="3GP" variation="3GP" />
        <dependency format="Matroska" variation="Matroska" />

        <!-- oddly, some people have uploaded originals with this next format -->
        <dependency format="MPEG4" variation="512Kb MPEG4" />

        <!-- derive from _our_ prior derivative only as last resort -->
        <dependency format="Ogg Video" variation="Ogg Video" />
      </variation>
      <variation rank="150" name="MPEGTS/Thumbnail" preextension="_000000" parameter="ffmpeg -i - -ss 1 -an -vf scale=160:110 -vframes 1 -pix_fmt yuvj422p _%06d.jpg">
        <dependency format="MPEGTS" variation="MPEGTS" conditionally="{'collection':['tvarchive-xxxx']}" />
      </variation>
    </variations>
  </format>


  <format name="Video Index">
    <extension>idx</extension>
    <class>Idx</class>
    <variations>
      <variation name="Video Index" preextension=".mpg">
        <!-- no longer derived as of Jun 2016 (tracey) -->
      </variation>
    </variations>
  </format>


  <format name="Segments">
    <!-- removed prior, just-for-TV items, research-oriented code from Stanford PTVN to chunk out "stories" -->
    <extension>segments</extension>
    <variations>
      <variation name="Segments"/>
    </variations>
  </format>


  <format name="JPEG Thumb">
    <extension>jpg</extension>
    <class>JPEGThumb</class>
    <variations>
      <variation rank="200" name="JPEG Thumb" preextension="_thumb">  <!-- module may make additional sizes listed below, too -->
        <dependency format="TIFF" variation="TIFF" />
        <dependency format="JP2" variation="JPEG 2000" />
        <dependency format="JPEG" variation="JPEG" />
        <dependency format="PNG" variation="PNG" />
        <dependency format="Animated GIF" variation="Animated GIF" conditionally="{'collection':['coverartarchive','eventartarchive']}" />
        <dependency format="PDF" variation="Text PDF" conditionally="{'collection':['coverartarchive','eventartarchive']}" />
        <dependency format="ImagePDF" variation="Image Container PDF" conditionally="{'collection':['coverartarchive','eventartarchive']}" />
      </variation>
      <variation name="JPEG 250px Thumb" preextension="_thumb250" />
      <variation name="JPEG 500px Thumb" preextension="_thumb500" />
      <variation name="JPEG 1200px Thumb" preextension="_thumb1200" />
      <variation name="JPEG Thumb Large" preextension="_thumb_large" /> <!--tracey (TV)-->
    </variations>
  </format>

  <format name="JPEG">
    <extension>jpg</extension>
    <extension>jpeg</extension>
    <variations>
      <variation name="JPEG" />
      <!-- <variation name="Single Page Original JPEG" /> -->
      <!-- <variation name="Single Page Processed JPEG" /> -->
    </variations>
  </format>

  <format name="JP2">
    <extension>jp2</extension>
    <variations>
      <variation name="JPEG 2000" />
    </variations>
  </format>

  <format name="TIFF">
    <extension>tif</extension>
    <extension>tiff</extension>
    <class>TIFF</class>
    <variations>
      <variation name="TIFF" />
      <!-- following disabled June 2009 to enable simple "TIFF" => "JPEG Thumb" pathway for NASA items -->
      <!-- <variation name="Single Page Original TIFF" /> -->
      <!-- <variation name="Single Page Processed TIFF" /> -->
      <!-- <variation name="Multi Page Original TIFF" preextension="_orig" multifile="true"> -->
        <!-- <dependency format="TIFF" variation="Single Page Original TIFF" /> -->
      <!-- </variation> -->
      <!-- <variation name="Multi Page Processed TIFF" multifile="true"> -->
        <!-- <dependency format="TIFF" variation="Single Page Processed TIFF" /> -->
      <!-- </variation> -->
    </variations>
  </format>

  <format name="PNG">
    <extension>png</extension>
    <class>PNG</class>
    <variations>
      <variation rank="220" name="PNG" conditionally="{'!collection':['tvarchive']}">
        <dependency format="WAVE"       variation="WAVE" />
        <dependency format="Shorten"    variation="Shorten"/>
        <dependency format="Flac"       variation="24bit Flac"/>
        <dependency format="Flac"       variation="Flac"/>
        <dependency format="Advanced Audio Coding" variation="Advanced Audio Coding"/>
        <dependency format="WebA"       variation="WebA" />
        <dependency format="AIFF"       variation="AIFF" />
        <dependency format="Windows Media Audio"  variation="Windows Media Audio" />
        <dependency format="Digital Theater Systems Audio" variation="Digital Theater Systems Audio"/>
        <dependency format="Real Audio" variation="Real Audio"/>
        <dependency format="Apple Lossless Audio" variation="Apple Lossless Audio"/>
        <dependency format="3GP Audio"  variation="3GP Audio" />
        <dependency format="MIDI"       variation="MIDI" />
        <dependency format="VBR MP3"    variation="VBR MP3"/>
        <dependency format="MPEG-4 Audio" variation="MPEG-4 Audio"/>
        <dependency format="MP3"        variation="MP3"/>
        <dependency format="MP3"        variation="320Kbps MP3"/>
        <dependency format="MP3"        variation="256Kbps MP3"/>
        <dependency format="MP3"        variation="192Kbps MP3"/>
        <dependency format="MP3"        variation="160Kbps MP3"/>
        <dependency format="MP3"        variation="128Kbps MP3"/>
        <dependency format="MP3"        variation="96Kbps MP3"/>
        <dependency format="MP3"        variation="64Kbps MP3"/>
        <dependency format="MP3"        variation="48Kbps MP3"/>
        <dependency format="MP3"        variation="32Kbps MP3"/>
        <dependency format="Ogg Vorbis" variation="Ogg Vorbis"/>
        <dependency format="MPEG Audio" variation="MPEG Audio"/>

        <!-- much less common formats (but reflects reality of cluster as of 11/2014) - tracey -->
        <dependency format="MP3"        variation="104Kbps MP3"/>
        <dependency format="MP3"        variation="112Kbps MP3"/>
        <dependency format="MP3"        variation="120Kbps MP3"/>
        <dependency format="MP3"        variation="136Kbps MP3"/>
        <dependency format="MP3"        variation="144Kbps MP3"/>
        <dependency format="MP3"        variation="152Kbps MP3"/>
        <dependency format="MP3"        variation="168Kbps MP3"/>
        <dependency format="MP3"        variation="16Kbps MP3"/>
        <dependency format="MP3"        variation="176Kbps MP3"/>
        <dependency format="MP3"        variation="184Kbps MP3"/>
        <dependency format="MP3"        variation="200Kbps MP3"/>
        <dependency format="MP3"        variation="208Kbps MP3"/>
        <dependency format="MP3"        variation="216Kbps MP3"/>
        <dependency format="MP3"        variation="224Kbps MP3"/>
        <dependency format="MP3"        variation="232Kbps MP3"/>
        <dependency format="MP3"        variation="240Kbps MP3"/>
        <dependency format="MP3"        variation="24Kbps MP3"/>
        <dependency format="MP3"        variation="288Kbps MP3"/>
        <dependency format="MP3"        variation="40Kbps MP3"/>
        <dependency format="MP3"        variation="56Kbps MP3"/>
        <dependency format="MP3"        variation="72Kbps MP3"/>
        <dependency format="MP3"        variation="80Kbps MP3"/>
        <dependency format="MP3"        variation="8Kbps MP3"/>
        <dependency format="MP3"        variation="Kbps MP3"/>
        <dependency format="MP3"        variation="MP3 (other)"/>
      </variation>
    </variations>
  </format>

  <format name="BMP">
    <extension>bmp</extension>
    <variations>
      <variation name="Bitmap Image" />
    </variations>
  </format>

  <format name="AI">
    <extension>ai</extension>
    <variations>
      <variation name="Adobe Illustrator" />
    </variations>
  </format>

  <format name="PDF">
    <extension>pdf</extension>
    <class>PDF</class>
    <variations>
      <!-- module will make "Image Container PDF" instead of "Text PDF" if language can't be ocr'd -->
      <variation name="Text PDF" conditionally="{'!collection':['sim_raw_scans','sim_microfilm','no-generated-pdf']}" parameter="{'production':'registry.archive.org/www/pdf/production','test':'registry.archive.org/www/pdf/testing'}">
        <dependency format="EPUB" variation="EPUB"/>
        <dependency format="Page Numbers JSON" variation="Page Numbers JSON" conditionally="{'collection':['internetarchivebooks','tesseract_test']}"/>
        <dependency format="AbbyyGZ" variation="Abbyy GZ" conditionally="{'format':['Page Numbers JSON'],'!collection':['internetarchivebooks','tesseract_test']}"/>
      </variation>
      <variation name="Uncompressed Image-Only PDF" preextension="_imgonly"/> <!-- no longer made -->
    </variations>
  </format>

  <!-- can be derived by PDF class, substituted for the main target -->
  <format name="ImagePDF">
    <extension>pdf</extension>
    <variations>
      <variation name="Image Container PDF"/>
    </variations>
  </format>

  <format name="Recoded PDF">
    <extension>pdf</extension>
    <class>ServerlessDocker</class>
    <variations>
      <variation name="Recoded Text PDF" preextension="_recoded"/> <!-- no longer made -->
    </variations>
  </format>

  <!-- ewwww. now that a single item can have both a contributed no-text pdf -->
  <!-- and a derived with-text pdf, we need an alternative filename for      -->
  <!-- with-text pdfs, to be used only when there's already a no-text one    -->
  <format name="HackPDF">
    <extension>pdf</extension>
    <class>HackPDF</class>
    <variations>
      <variation name="Additional Text PDF" preextension="_text" conditionally="{'!collection':['no-generated-pdf']}">
        <dependency format="AbbyyGZ" variation="Abbyy GZ"/>
        <dependency format="abbyyXML" variation="ABBYY XML"/>
      </variation>
    </variations>
  </format>

  <!-- this oddity is because Adobe Digital Editions doesn't currently -->
  <!-- handle pdfs that use jp2 compression; we used to make it for    -->
  <!-- items in the inlibrary collection, but have now abandoned       -->
  <!-- support for that app with our PDFs                              -->
  <format name="JPEGPDF">
    <extension>pdf</extension>
    <variations>
      <variation name="JPEG-Compressed PDF" preextension="_jpg" />
    </variations>
  </format>

  <format name="EncryptedPDF">
    <extension>pdf</extension>
    <class>PackageWithACS</class>
    <variations>
      <variation name="ACS Encrypted PDF" preextension="_encrypted" conditionally="{'collection':['inlibrary','printdisabled']}">
        <dependency format="HackPDF" variation="Additional Text PDF" conditionally="{'!collection':['sim_raw_scans','sim_microfilm','internetarchivebooks']}"/>
        <dependency format="PDF" variation="Text PDF" conditionally="{'!collection':['sim_raw_scans','sim_microfilm']}"/>
        <dependency format="ImagePDF" variation="Image Container PDF" conditionally="{'!collection':['sim_raw_scans','sim_microfilm','internetarchivebooks']}"/>
      </variation>
    </variations>
  </format>

  <format name="EncryptedEPUB">
    <extension>epub</extension>
    <class>PackageWithACS</class>
    <variations>
      <variation name="ACS Encrypted EPUB" preextension="_encrypted" conditionally="{'collection':['inlibrary','printdisabled']}">
        <dependency format="EPUB" variation="Remediated EPUB" conditionally="{'!collection':['sim_raw_scans','sim_microfilm','internetarchivebooks']}"/>
        <dependency format="EPUB" variation="EPUB" conditionally="{'!collection':['sim_raw_scans','sim_microfilm','internetarchivebooks']}"/>
        <dependency format="AbbyyGZ" variation="Abbyy GZ" conditionally="{'!collection':['sim_raw_scans','sim_microfilm','internetarchivebooks']}"/>
      </variation>
    </variations>
  </format>

  <format name="ZippedPDF">
    <extension>zip</extension>
    <class>PDF</class>
    <variations>
      <!-- No longer producing Single Page Zipped PDFs, but classification  -->
      <!-- remains for existing files                                       -->
      <variation name="Single Page Zipped PDF" preextension="_pdf">
      </variation>
    </variations>
  </format>

  <format name="ScanFactors">
    <extension>xml</extension>
    <class>ScanFactors</class>
    <variations>
      <variation name="Scan Factors" preextension="_scanfactors">
        <!-- derivation turned off May 2009 -->
        <!-- <dependency format="DjvuXML" variation="Djvu XML"/> -->
      </variation>
    </variations>
  </format>

  <format name="DjVuTXT">
    <extension>txt</extension>
    <class>DJVUTXT</class>
    <variations>
      <variation name="DjVuTXT" preextension="_djvu" conditionally="{'!collection':['poor_ocr']}">
        <dependency format="djvuXML" variation="Djvu XML" />
      </variation>
    </variations>
  </format>

  <format name="djvuXML">
    <extension>xml</extension>
    <class>DjvuXML</class>
    <variations>
      <variation name="Djvu XML" preextension="_djvu">
        <!-- Original DjVu gets higher priority so it gets used as the source -->
        <!-- when we can make one with hiddentext while preprocessing a raw   -->
        <!-- book, and the language is one we can't OCR with Abbyy (true for  -->
        <!-- some of the books transferred from China)                        -->
        <dependency format="DjVu" variation="Original DjVu"/>
        <dependency format="hOCR" variation="hOCR GZ"/>
        <dependency format="AbbyyGZ" variation="Abbyy GZ"/>
        <dependency format="abbyyXML" variation="ABBYY XML"/>
      </variation>
    </variations>
  </format>

  <format name="MARCSource">
    <extension>xml</extension>
    <variations>
      <variation name="MARC Source" preextension="_metasource"/>
    </variations>
  </format>

  <format name="MARCBinary">
    <extension>mrc</extension>
    <variations>
      <variation name="MARC Binary" preextension="_meta"/>
    </variations>
  </format>

  <format name="MARC">
    <extension>xml</extension>
    <variations>
      <variation name="MARC" preextension="_marc"/>
    </variations>
  </format>

  <format name="Dublin">
    <extension>xml</extension>
    <variations>
      <variation name="Dublin Core" preextension="_dc"/>
    </variations>
  </format>

  <format name="Scandata">
    <extension>xml</extension>
    <class>ScandataXML</class> <!-- class "Scandata" already taken -->
    <variations>
      <variation name="Scandata" preextension="scandata"/> <!-- no '_' to match Old Skul "scandata.xml" -->
      <variation name="Scandata" preextension="_scandata">
        <dependency format="DjvuXML" variation="Djvu XML"/>
      </variation>
      <variation name="Preliminary Scandata" preextension="_prelimscandata"/>
      <variation name="Development Scandata" preextension="_dev_scandata"/>
    </variations>
  </format>

  <format name="Segment Data">
    <extension>json</extension>
    <extension>xml</extension>
    <variations>
      <variation name="Segment Data" preextension="_segments"/>
    </variations>
  </format>

  <format name="Metadata">
    <extension>xml</extension>
    <variations>
      <variation name="Metadata" preextension="_meta"/>
    </variations>
  </format>

  <!-- for <file>_meta.txt, which contains http headers used to load S3 files  -->
  <format name="Metadata">
    <extension>txt</extension>
    <variations>
      <variation name="Metadata" preextension="_meta"/>
    </variations>
  </format>

  <!-- for <file>_meta.sqlite, which contains various s3 metadata  -->
  <format name="Metadata">
    <extension>sqlite</extension>
    <variations>
      <variation name="Metadata" preextension="_meta"/>
    </variations>
  </format>

  <format name="Metadata">
    <extension>sqlite</extension>
    <variations>
      <variation name="SimpleLists Archival Backup" preextension="_simplelists"/>
    </variations>
  </format>

  <!-- These are made, via the ArticleMeta book op, from the Djvu XML -->
  <format name="StructuralMeta">
    <extension>xml</extension>
    <variations>
      <variation name="Structural Metadata" preextension="_structuralmeta"/>
    </variations>
  </format>

  <!-- two formats produced and uploaded by Biodiversity Heritage Library Project -->
  <!-- this one contains an index of scientific names used in the text -->
  <format name="Names">
    <extension>xml</extension>
    <variations>
      <variation name="Name Metadata" preextension="_names"/>
    </variations>
  </format>
  <!-- and the second is a variation of METS that contains BHL's version of METS metadata -->
  <format name="METS">
    <extension>xml</extension>
    <variations>
      <variation name="Biodiversity Heritage Library METS" preextension="_bhlmets"/>
      <variation name="METS" preextension="_mets"/> <!-- default METS not exclusive to BHL -->
    </variations>
  </format>

  <!-- This replaces the former AbbyyZIP -->
  <format name="AbbyyGZ">
    <extension>gz</extension>
    <class>AbbyyXML</class>
    <variations>
      <variation name="Abbyy GZ" preextension="_abbyy" conditionally="{'!collection':['acs4_data','mathematicsimage','usfederalcourtsdev','tesseract_test','sim_microfilm','internetarchivebooks']}">
        <dependency format="ZIP" variation="Single Page Processed JP2 ZIP"/>
        <dependency format="ZIP" variation="Single Page Processed JP2 Tar"/>
        <dependency format="ZIP" variation="Single Page Processed JPEG ZIP"/>
        <dependency format="ZIP" variation="Single Page Processed TIFF ZIP"/>
        <dependency format="TAR" variation="Single Page Processed JPEG Tar"/>
      </variation>
    </variations>
  </format>

  <!-- retain format def until there are no longer any such files, so as not to confuse the Deriver -->
  <format name="abbyyXML">
    <extension>xml</extension>
    <variations>
      <variation name="ABBYY XML" preextension="_abbyy"/>
    </variations>
  </format>

  <format name="DjVu">
    <extension>djvu</extension>
    <variations>
      <variation name="DjVu"/>
      <variation name="Original DjVu" preextension="_orig"/>
    </variations>
  </format>

  <format name="Tar">
    <extension>tar</extension>
    <class/>
    <variations>
      <variation name="Single Page Original JPEG Tar" preextension="_orig_jpg" multifile="true" />
      <variation name="Single Page Processed JPEG Tar" preextension="_jpg" multifile="true"/>
      <variation name="Raw Mekel Tar" preextension="_mekel"/>
      <variation name="RePublisher Proxy Tar" preextension="_proxy_jpg"/>
      <variation name="RePublisher Full Tar" preextension="_full_jpg"/>
      <variation name="Generic Raw Book Tar" preextension="_images"/>
      <variation name="Raw China Books RAR Tar" preextension="_cnrar"/>
      <variation name="TAR" multifile="true"/> <!--generic default in /editxml-->
    </variations>
  </format>



  <format name="Flippy ZIP">
    <extension>zip</extension>
    <variations>
      <variation name="Flippy ZIP" preextension="_flippy" />
    </variations>
  </format>



  <format name="Text">
    <extension>txt</extension>
    <class />
    <variations>
      <variation name="Single Book Page Text" />
      <variation name="Text" />
    </variations>
  </format>

  <format name="EPUB">
    <extension>epub</extension>
    <class>EPUB</class>
    <variations>
      <variation name="EPUB" conditionally="{'!collection':['poor_ocr']}">
      <!-- epub derives turned off, 2016-04-25 -->
      <!--  <dependency format="AbbyyGZ" variation="Abbyy GZ"/> -->
      <!--  <dependency format="ZIP" variation="Abbyy ZIP"/> -->
      <!--  <dependency format="abbyyXML" variation="ABBYY XML"/> -->
      </variation>
      <variation name="Remediated EPUB" preextension="_rem"/>
    </variations>
  </format>

  <format name="Compiled HTML">
    <extension>chm</extension>
    <variations>
      <variation name="Compiled HTML"/>
    </variations>
  </format>

  <format name="FictionBook 2.0">
    <extension>fb2</extension>
    <variations>
      <variation name="FictionBook 2.0"/>
    </variations>
  </format>

  <!-- next two formats related to OCR corrections UI -->
  <format name="AbbyyHTML"> <!-- was made as "extraTarget" while making djvu.txt -->
    <extension>html</extension>
    <class>AbbyyHTML</class>
    <variations>
      <variation name="Abbyy HTML" preextension="_abbyy">
        <!-- <dependency format="AbbyyGZ" variation="Abbyy GZ"/> don't start deriving yet -->
      </variation>
    </variations>
  </format>

  <format name="CorrAbbyyHTML">
    <extension>html</extension>
    <variations>
      <variation name="Corrected Abbyy HTML" preextension="_corrected" />
    </variations>
  </format>


  <format name="Contents">
    <extension>xml</extension>
    <class>TOC</class>
    <variations>
      <variation name="Contents" preextension="_toc">
        <dependency format="djvuXML" variation="Djvu XML"/>
      </variation>
    </variations>
  </format>

  <format name="MOBI">
    <extension>mobi</extension>
    <variations>
      <variation name="MOBI" />
    </variations>
  </format>

  <format name="PalmOS Database">
    <extension>pdb</extension>
    <variations>
      <variation name="PalmOS Database"/>
      <variation name="PalmOS Plucker" preextension=".plucker"/>
    </variations>
  </format>

  <format name="Tar GZip">
    <extension>gz</extension>
    <!-- <class>TarGz</class> no longer exists -->
    <variations>
      <variation name="TGZiped Text Files" preextension=".txt.tar" multifile="true">
        <!-- <dependency format="Text" variation="Single Book Page Text" /> not any more -->
      </variation>
    </variations>
  </format>

  <format name="Cover">
    <extension>sxw</extension>
    <class>BookCover</class>
    <variations>
      <variation name="Book Cover" preextension="_cover">
        <dependency format="Metadata" variation="Book Metadata" />
      </variation>
    </variations>
  </format>

  <format name="JSON GZ">
    <extension>gz</extension>
    <variations>
      <variation name="JSON GZ" preextension=".json"/>
    </variations>
  </format>

  <format name="DAT">
    <extension>gz</extension>
    <variations>
      <variation name="DAT" preextension=".dat" />
    </variations>
  </format>

  <format name="Encrypted DAT">
    <extension>gpg</extension>
    <class />
    <variations>
      <variation name="Encrypted DAT" preextension=".dat.gz" />
    </variations>
  </format>

  <format name="CDX Index">
    <extension>gz</extension>
    <class>CDXIndex</class>
    <variations>
      <!-- assign rank so HeritrixJob runs before CDXIndex, in case HeritrixJob removes the W/ARC -->
      <variation rank="120" name="ARC CDX Index" preextension=".arc.os.cdx">
        <dependency format="ARC_IA" variation="Internet Archive ARC"/>
        <dependency format="ARC_IA GZ" variation="Internet Archive ARC GZ"/>
      </variation>
      <variation rank="120" name="WARC CDX Index" preextension=".warc.os.cdx">
        <dependency format="WARC" variation="Web ARChive"/>
        <dependency format="WARC GZ" variation="Web ARChive GZ"/>
        <dependency format="WARC ZST" variation="Web ARChive ZST"/>
      </variation>
      <variation name="Item CDX Index" preextension=".cdx"/>
    </variations>
  </format>

  <format name="CDX Meta-Index">
    <extension>idx</extension>
    <variations>
      <variation name="Item CDX Meta-Index" preextension=".cdx" />
    </variations>
  </format>

  <format name="Item CDX Summary">
    <extension>gz</extension>
    <variations>
      <variation name="Item CDX Summary" preextension="_summary.json" />
    </variations>
  </format>

  <format name="Web Archive Transformation GZ">
    <extension>gz</extension>
    <class>WAT</class>
    <variations>
      <variation name="ARC Transformation GZ" preextension="_arc.wat" conditionally="{'collection':['ArchiveIt-Collection-1068','geocities']}">
        <dependency format="ARC_IA" variation="Internet Archive ARC"/>
        <dependency format="ARC_IA GZ" variation="Internet Archive ARC GZ"/>
      </variation>
      <variation name="WARC Transformation GZ" preextension="_warc.wat" conditionally="{'collection':['ArchiveIt-Collection-1068','ArchiveIt-Collection-8513','geocities','ArchiveIt-Collection-2950','ArchiveIt-Collection-6689','imlsmuseumuniverse','EndOfTerm2016WebCrawls']}">
        <dependency format="WARC" variation="Web ARChive"/>
        <dependency format="WARC GZ" variation="Web ARChive GZ"/>
      </variation>
    </variations>
  </format>

  <format name="Web Archive Named Entities GZ">
    <extension>gz</extension>
    <class>WANE</class>
    <variations>
      <variation name="ARC Named Entities GZ" preextension="_arc.wane">
      </variation>
      <variation name="WARC Named Entities GZ" preextension="_warc.wane">
      </variation>
    </variations>
  </format>

  <format name="Longitudinal Graph Analysis TGZ">
    <extension>tgz</extension>
    <class>LGA</class>
    <variations>
      <variation name="Longitudinal Graph Analysis TGZ" preextension=".lga">
      </variation>
    </variations>
  </format>

  <format name="Web Archive HostLinks GZ">
    <extension>gz</extension>
    <class>HostLinks</class>
    <variations>
      <variation name="WARC HostLinks GZ" preextension="_warc.hostlinks" conditionally="{'collection':['webwidecrawl','archiveitdigitalcollection','imlsmuseumuniverse']}">
        <dependency format="WARC GZ" variation="Web ARChive GZ"/>
      </variation>
    </variations>
  </format>

  <format name="Web Archive UrlLinks Log">
    <extension>log</extension>
    <class>UrlLinks</class>
    <variations>
      <variation name="WARC UrlLinks Log" preextension="_warc.urllinks" conditionally="{'collection':['wide00012']}">
        <dependency format="WARC GZ" variation="Web ARChive GZ"/>
      </variation>
    </variations>
  </format>

  <format name="Parsed GZ">
    <extension>gz</extension>
    <class>Parse</class>
    <variations>
      <variation name="Parsed GZ" preextension="_parsed.json" conditionally="{'collection':['shallow_00004','wide00005','nlaweb2013','survey_00000','nls_humanidades','nls_elec2011','nls_2009','nls_2010','nls_2011','nls_2012','nls_2013','20thcenturyweb','nara109thcongressionalcrawl','nara110thcongressionalcrawl','nara111thcongressionalcrawl','nara112thcongressionalcrawl','misc_govcrawls','nl_israel','nlil_2013','naraweb','ArchiveIt-Collection-1078', 'ArchiveIt-Collection-924','nla_2014','ArchiveIt-Collection-1068']}">
        <dependency format="ARC_IA" variation="Internet Archive ARC"/>
        <dependency format="ARC_IA GZ" variation="Internet Archive ARC GZ"/>
        <dependency format="WARC" variation="Web ARChive"/>
        <dependency format="WARC GZ" variation="Web ARChive GZ"/>
      </variation>
    </variations>
  </format>

  <!-- format names for ARC files drawn from http://www.digitalpreservation.gov/formats/fdd/fdd000235.shtml -->
  <format name="ARC_IA">
    <extension>arc</extension>
    <variations>
      <variation name="Internet Archive ARC" />
    </variations>
  </format>

  <format name="ARC_IA GZ">
    <extension>gz</extension>
    <class />
    <variations>
      <variation name="Internet Archive ARC GZ" preextension=".arc" />
    </variations>
  </format>

  <format name="Encrypted ARC_IA GZ">
    <extension>gpg</extension>
    <class />
    <variations>
      <variation name="Encrypted Internet Archive ARC GZ" preextension=".arc.gz" />
    </variations>
  </format>

  <!-- format names for WARC files drawn from http://www.digitalpreservation.gov/formats/fdd/fdd000236.shtml -->
  <format name="WARC">
    <extension>warc</extension>
    <variations>
      <variation name="Web ARChive" />
    </variations>
  </format>

  <format name="WARC GZ">
    <extension>gz</extension>
    <variations>
      <variation name="Web ARChive GZ" preextension=".warc" />
    </variations>
  </format>

  <format name="Encrypted WARC GZ">
    <extension>gpg</extension>
    <variations>
      <variation name="Encrypted Web ARChive GZ" preextension=".warc.gz" />
    </variations>
  </format>

  <format name="WARC ZST">
    <extension>zst</extension>
    <variations>
      <variation name="Web ARChive ZST" preextension=".warc" />
    </variations>
  </format>


  <format name="RAR">
    <extension>rar</extension>
    <variations>
      <variation name="RAR" />
    </variations>
  </format>

  <!-- generic default for .gz files that don't match any of the more specific formats -->
  <format name="GZ">
    <extension>gz</extension>
    <variations>
      <variation name="GZIP" />
    </variations>
  </format>

  <!-- generic default for .tgz files that don't match any of the more specific formats -->
  <format name="TGZ">
    <extension>tgz</extension>
    <variations>
      <variation name="GZipped TAR" />
    </variations>
  </format>

  <format name="Closed Caption Text">
    <extension>txt</extension>
    <class />
    <variations>
      <variation name="Closed Caption Text" preextension=".cc1"/>
      <variation name="Closed Caption Text" preextension=".cc2"/>
      <variation name="Closed Caption Text" preextension=".cc3"/>
      <variation name="Closed Caption Text" preextension=".cc4"/>
      <variation name="Closed Caption Text" preextension=".cc5"/>
      <variation name="Closed Caption Text" preextension=".asr"/>
    </variations>
  </format>

  <format name="TV Text Stream">
    <extension>txt</extension>
    <variations>
      <variation name="TV Text Stream" preextension=".text1"/>
      <variation name="TV Text Stream" preextension=".text2"/>
      <variation name="TV Text Stream" preextension=".text3"/>
      <variation name="TV Text Stream" preextension=".text4"/>
      <variation name="TV Text Stream" preextension=".text5"/>
    </variations>
  </format>

  <format name="Extended Data Services">
    <extension>txt</extension>
    <variations>
      <variation name="Extended Data Services" preextension=".xds"/>
    </variations>
  </format>

  <format name="SubRip">
    <extension>srt</extension>
    <class>Captions</class>
    <variations>
      <!-- NOTE: explicitly allowed to be derived from another derivative -->
      <!-- for TV, also extracts CC, then tries to align it with extracted audio forms... -->
      <variation rank="260" name="SubRip" conditionally="{'!collection':['tvsatellite']}">
        <dependency format="MPEGTS" variation="MPEGTS" conditionally="{'collection':['tvarchive-xxxx']}"/>
        <dependency format="h.264/MPEG2-TS" variation="h.264/MPEG2-TS" />
        <dependency format="MPEG2-TS" variation="MPEG2-TS" />
        <dependency format="MPEG2" variation="MPEG2"/>
        <dependency format="MPEG1" variation="MPEG1"/>
        <dependency format="ISO Image" variation="ISO Image" />

        <dependency format="h.264" variation="h.264"/>

        <dependency format="WAVE" variation="WAVE"/>
        <dependency format="Flac" variation="Flac"/>
        <dependency format="Shorten" variation="Shorten"/>
      </variation>
    </variations>
  </format>

  <format name="Web Video Text Tracks">
    <extension>vtt</extension>
    <variations>
      <variation name="Web Video Text Tracks" />
    </variations>
  </format>


  <format name="ASR">
    <extension>js</extension>
    <class>ASR</class>
    <variations>
      <variation rank="250" name="ASR" preextension=".asr" conditionally="{'collection':['TV-DW','TV-ALJAZ','TV-RT']}">
        <dependency format="MP3" variation="MP3"/>
      </variation>
    </variations>
  </format>


  <format name="JSON">
    <extension>json</extension>
    <class>JSON</class>
    <variations>
      <variation rank="270" name="JSON" conditionally="{'collection':['tvarchive']}">
        <dependency format="NRT" variation="NRT" />
        <dependency format="SubRip" variation="SubRip" />
      </variation>
      <variation name="OCLC xISBN JSON" preextension="_xisbn"/>
      <variation name="Extra Metadata JSON" preextension="_extrameta"/>
      <variation name="Microfilm Issues JSON" preextension="_ufilm"/>
    </variations>
  </format>

  <format name="Page Numbers JSON">
    <extension>json</extension>
    <class>DetectPageNumbers</class>
    <variations>
      <variation name="Page Numbers JSON" preextension="_page_numbers">
        <dependency format="DjvuXML" variation="Djvu XML" conditionally="{'format':['Scandata']}" />
      </variation>
    </variations>
  </format>

  <format name="Log">
    <extension>log</extension>
    <class>ExtractMeta</class>
    <variations>
      <variation name="Log" />
      <variation name="Metadata Log" preextension="_meta">
        <dependency format="Metadata" variation="Extra Metadata JSON"/>
        <dependency format="Metadata" variation="MusicBrainz Metadata"/>
        <dependency format="Metadata" variation="OCLC xISBN JSON"/>
        <dependency format="ZIP" variation="OCLC xISBN ZIP"/>
      </variation>
    </variations>
  </format>

  <format name="Metadata">
    <extension>xml</extension>
    <class />
    <variations>
      <variation name="Metadata" />
      <variation name="TV Electronic Program Guide" preextension="epg"/>
      <variation name="MusicBrainz Metadata" preextension="_mb_metadata"/>
      <variation name="BDRC Outline" preextension="_bdrc_outline"/>
    </variations>
  </format>

  <format name="HTML">
    <extension>htm</extension>
    <extension>html</extension>
    <variations>
      <variation name="HTML"/>
    </variations>
  </format>

  <format name="RDF">
    <extension>rdf</extension>
    <variations>
      <variation name="Zotero RDF" preextension="zotero"/>
    </variations>
  </format>

  <format name="DRules">
    <extension>conf</extension>
    <variations>
      <variation name="Derivation Rules" preextension="rules"/>
    </variations>
  </format>

  <format name="Archive BitTorrent">
    <extension>torrent</extension>
    <class>Torrent</class>
    <variations>
      <variation name="Archive BitTorrent" preextension="_archive"/>
    </variations>
  </format>

  <format name="BitTorrentContents">
    <extension>txt</extension>
    <class>Torrent</class>
    <variations>
      <variation name="BitTorrentContents" preextension="_torrent">
        <dependency format="BitTorrent" variation="BitTorrent"/>
      </variation>
    </variations>
  </format>

  <format name="BitTorrent">
    <extension>torrent</extension>
    <variations>
      <variation name="BitTorrent">
      </variation>
    </variations>
  </format>

  <format name="HeritrixJobLog">
    <extension>txt</extension>
    <class>HeritrixJob</class>
    <variations>
      <!-- assign rank so HeritrixJob runs before CDXIndex, in case HeritrixJob removes the W/ARC -->
      <variation rank="110" name="HeritrixCrawlLog" preextension="_cxml">
        <dependency format="HeritrixJob" variation="HeritrixJob"/>
      </variation>
    </variations>
  </format>

  <format name="HeritrixJob">
    <extension>cxml</extension>
    <variations>
      <variation name="HeritrixJob">
      </variation>
    </variations>
  </format>

  <format name="PersonalArchiveLog">
    <extension>txt</extension>
    <class>PersonalArchive</class>
    <variations>
      <variation name="PersonalArchiveLog" preextension="_parch">
        <dependency format="PersonalArchive" variation="PersonalArchive"/>
      </variation>
    </variations>
  </format>

  <format name="PersonalArchive">
    <extension>parch</extension>
    <variations>
      <variation name="PersonalArchive"/>
    </variations>
  </format>

  <format name="Comic Book ZIP">
    <extension>cbz</extension>
    <variations>
      <variation name="Comic Book ZIP"/>
    </variations>
  </format>

  <format name="Comic Book RAR">
    <extension>cbr</extension>
    <variations>
      <variation name="Comic Book RAR"/>
    </variations>
  </format>

  <format name="Digital Asset Exchange">
    <extension>dae</extension>
    <variations>
      <variation name="Digital Asset Exchange"/>
    </variations>
  </format>

  <format name="TransContents">
    <extension>xml</extension>
    <variations>
      <variation name="Texts Transclusion Contents" preextension="_texts_trans"/>
      <variation name="Audio Transclusion Contents" preextension="_audio_trans"/>
      <variation name="Movies Transclusion Contents" preextension="_movies_trans"/>
    </variations>
  </format>

  <format name="Symlink Instructions">
    <extension>txt</extension>
    <variations>
      <variation name="Symlink Instructions" preextension="_symlinks"/>
    </variations>
  </format>

  <format name="CSV">
    <extension>csv</extension>
    <variations>
      <variation name="Comma-Separated Values" />
      <variation name="Catalog History CSV" preextension="_history" />
    </variations>
  </format>

  <!-- these two used by giganews usenet items -->
  <format name="CSV GZ">
    <extension>gz</extension>
    <variations>
      <variation name="Comma-Separated Values GZ" preextension=".csv" />
    </variations>
  </format>

  <format name="MBOX GZ">
    <extension>gz</extension>
    <variations>
      <variation name="MBOX GZ" preextension=".mbox" />
    </variations>
  </format>

  <format name="Simple List JSONL">
    <extension>jsonl</extension>
    <variations>
      <variation name="Simple List JSONL" preextension="_list"/>
    </variations>
  </format>

  <format name="List Inversion Log">
    <extension>log</extension>
    <class>InvertList</class>
    <variations>
      <variation name="List Inversion Log" preextension="_list">
        <dependency format="Simple List JSONL" variation="Simple List JSONL"/>
      </variation>
    </variations>
  </format>

</formats>
